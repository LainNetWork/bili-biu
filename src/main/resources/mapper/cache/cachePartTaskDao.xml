<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fun.lain.bilibiu.cache.mapper.CachePartTaskMapper">
    <insert id="saveOrUpdateBatch" parameterType="java.util.List">
        INSERT INTO cache_part_task ( avid,avTitle,cid,title,quality,size,cacheSize,status,message)
        VALUES
            <foreach collection="list" item="item" separator=",">
                (#{item.avid},#{item.avTitle},#{item.cid},#{item.title},#{item.quality},#{item.size},#{item.cacheSize},#{item.status},#{item.message})
            </foreach>
        ON DUPLICATE KEY UPDATE
        avTitle = VALUES(avTitle),
        avid = VALUES(avid),
        cid = VALUES(cid),
        title = VALUES(title),
        quality = VALUES(quality),
        size = VALUES(size),
        cacheSize = VALUES(cacheSize),
        status = VALUES(status),
        message = VALUES(message)
        ;
    </insert>
</mapper>